{"version":3,"file":"main.js","mappings":"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","sources":["./src/app/app.component.ts","./src/app/app.component.html","./src/app/app.module.ts","./src/environments/environment.ts","./src/main.ts"],"sourcesContent":["import { Component, ViewChild, ElementRef } from '@angular/core'\nimport { FormBuilder, FormControl, Validators } from '@angular/forms'\n\nimport { Conversation, UserAgent, Session, Stream } from '@apirtc/apirtc'\n\n\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent {\n\n  title = 'ApiRTC-angular';\n\n  @ViewChild(\"localVideo\") videoRef: ElementRef;\n\n  conversationFormGroup = this.fb.group({\n    name: this.fb.control('', [Validators.required])\n  });\n\n  constructor(private fb: FormBuilder) {\n  }\n\n  get conversationNameFc(): FormControl {\n    return this.conversationFormGroup.get('name') as FormControl;\n  }\n\n  conversation: any;\n  remotesCounter = 0;\n\n  getOrcreateConversation() {\n    console.log('fist')\n    var localStream = null;\n\n    //==============================\n    // 1/ CREATE USER AGENT\n    //==============================\n    var userAgent = new UserAgent({\n      uri: 'apiKey:d710c86b379c58d1a7d73bcaab235809'\n    });\n\n    //==============================\n    // 2/ REGISTER\n    //==============================\n    userAgent.register().then((session: Session) => {\n      console.log(Session)\n      \n      console.log('register')\n    \n\n      //==============================\n      // 3/ CREATE CONVERSATION\n      //==============================\n      const conversation: Conversation = session.getConversation(this.conversationNameFc.value);\n      this.conversation = conversation;\n\n      //==========================================================\n      // 4/ ADD EVENT LISTENER : WHEN NEW STREAM IS AVAILABLE IN CONVERSATION\n      //==========================================================\n      conversation.on('streamListChanged', (streamInfo: any) => {\n        console.log('streamlist')\n        console.log(\"streamListChanged :\", streamInfo);\n        if (streamInfo.listEventType === 'added') {\n          if (streamInfo.isRemote === true) {\n            conversation.subscribeToMedia(streamInfo.streamId)\n              .then((stream: Stream) => {\n                console.log('subscribeToMedia success', stream);\n              }).catch((err) => {\n                console.log('test')\n                console.error('subscribeToMedia error', err);\n              });\n          }\n        }\n      });\n      //=====================================================\n      // 4 BIS/ ADD EVENT LISTENER : WHEN STREAM IS ADDED/REMOVED TO/FROM THE CONVERSATION\n      //=====================================================\n      conversation.on('streamAdded', (stream: Stream) => {\n        console.log('stream added')\n        this.remotesCounter += 1;\n        stream.addInDiv('remote-container', 'remote-media-' + stream.streamId, {}, false);\n      }).on('streamRemoved', (stream: any) => {\n        this.remotesCounter -= 1;\n        stream.removeFromDiv('remote-container', 'remote-media-' + stream.streamId);\n      });\n\n      //==============================\n      // 5/ CREATE LOCAL STREAM\n      //==============================\n      userAgent.createStream({\n        constraints: {\n          audio: true,\n          video: true\n        }\n      })\n        .then((stream: Stream) => {\n\n          console.log('createStream :', stream);\n\n          // Save local stream\n          localStream = stream;\n\n          // Display stream\n          localStream.attachToElement(this.videoRef.nativeElement);\n\n          //==============================\n          // 6/ JOIN CONVERSATION\n          //==============================\n          conversation.join()\n            .then(() => {\n              //==============================\n              // 7/ PUBLISH LOCAL STREAM\n              //==============================\n              conversation.publish(localStream).then((stream: Stream) => {\n                console.log('published', stream);\n              }).catch((err: any) => {\n                console.error('publish error', err);\n              });\n            }).catch((err: any) => {\n              console.error('Conversation join error', err);\n            });\n        }).catch((err: any) => {\n          console.error('create stream error', err);\n        });\n    });\n  }\n}\n","<div id=\"app\">\n    <p>\n        <img alt=\"ApiRTC logo\" src=\"./assets/ApiRTC.png\" width=\"66\" height=\"76\" /> &\n        <img alt=\"Angular logo\" src=\"./assets/angular.svg\" width=\"76\" height=\"76\" />\n    </p>\n    <form *ngIf=\"!conversation\" [formGroup]=\"conversationFormGroup\" (ngSubmit)=\"getOrcreateConversation()\">\n        <mat-form-field>\n            <mat-label>Conversation Name</mat-label>\n            <input type=\"text\" matInput placeholder=\"type name\" formControlName=\"name\">\n        </mat-form-field>&nbsp;\n        <button mat-raised-button color=\"primary\" type=\"submit\" [disabled]=\"!conversationFormGroup.valid\" title=\"Get Or Create Conversation\">GetOrCreateConversation</button>\n    </form>\n    <div *ngIf=\"conversation\" class=\"container\">\n        <div id=\"remote-container\" class=\"fullscreen\">\n            hil\n            <div id=\"app\">\n                <p>\n                    <img alt=\"ApiRTC logo\" src=\"./assets/ApiRTC.png\" width=\"66\" height=\"76\" /> &\n                    <img alt=\"Angular logo\" src=\"./assets/angular.svg\" width=\"76\" height=\"76\" />\n                </p>\n                <form *ngIf=\"conversation\" [formGroup]=\"conversationFormGroup\" (ngSubmit)=\"getOrcreateConversation()\">\n                    <mat-form-field>\n                        <mat-label>Conversation Name</mat-label>\n                        <input type=\"text\" matInput placeholder=\"type name\" formControlName=\"name\">\n                    </mat-form-field>&nbsp;\n                    <button mat-raised-button color=\"primary\" type=\"submit\" [disabled]=\"!conversationFormGroup.valid\" title=\"Get Or Create Conversation\">GetOrCreateConversation</button>\n                </form>\n                <div *ngIf=\"conversation\" class=\"container\">\n                    <div id=\"remote-container\" class=\"fullscreen\">\n                        hil\n                        \n                    </div>\n                    <div id=\"local-container\" [ngClass]=\"{'over':remotesCounter>0}\">\n                        <video #localVideo autoplay playsinline></video>\n                    </div>\n                </div>\n                hi\n            </div>\n        </div>\n        <div id=\"local-container\" [ngClass]=\"{'over':remotesCounter>0}\">\n            <video #localVideo autoplay playsinline></video>\n        </div>\n    </div>\n    hi\n</div>","import { NgModule } from '@angular/core';\nimport { BrowserModule } from '@angular/platform-browser';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatInputModule } from '@angular/material/input';\n\nimport { AppComponent } from './app.component';\n\n@NgModule({\n  declarations: [\n    AppComponent\n  ],\n  imports: [\n    BrowserModule,\n    FormsModule, ReactiveFormsModule,\n    BrowserAnimationsModule, MatFormFieldModule, MatInputModule\n  ],\n  providers: [],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/plugins/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n"],"names":[],"sourceRoot":"webpack:///"}